# Makefile for TestAllRegions

SDK_PATH = ../Zebra-FXR90_Embedded-Native-SDK-C-CPP_Linux_V1.0.0
CROSS_COMPILE = $(SDK_PATH)/tools/wrappers/aarch64-poky-linux-
CC = $(CROSS_COMPILE)g++
SYSROOT = --sysroot=$(SDK_PATH)/rootfs

INCLUDES = -I$(SDK_PATH)/RFID_C_API/include
LIBS = -L$(SDK_PATH)/RFID_C_API/lib -L$(SDK_PATH)/rootfs/usr/lib
LDFLAGS = -Wl,-rpath,/platform/lib:/usr/lib:/apps/bin/libs
LINK_LIBS = -lrfidapi32 -lpthread -lxml2 -lrt -lltk -lssl -lcrypto -lcurl -lnettle -lz -lgmp -lhogweed -lidn -lssh2

all: BuildResults/TestAllRegions.elf

BuildResults/TestAllRegions.o: Source/Manual/TestAllRegions.cpp
	@mkdir -p BuildResults
	$(CC) $(SYSROOT) $(INCLUDES) -c Source/Manual/TestAllRegions.cpp -o BuildResults/TestAllRegions.o

BuildResults/TestAllRegions.elf: BuildResults/TestAllRegions.o
	@echo "Linking TestAllRegions..."
	$(CC) $(SYSROOT) $(LIBS) $(LDFLAGS) -o BuildResults/TestAllRegions.elf BuildResults/TestAllRegions.o $(LINK_LIBS)
	@echo "Build complete: BuildResults/TestAllRegions.elf"

clean:
	rm -f BuildResults/TestAllRegions.o BuildResults/TestAllRegions.elf
	@echo "Clean complete"

.PHONY: all clean
